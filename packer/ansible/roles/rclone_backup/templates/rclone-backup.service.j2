[Unit]
Description=Rclone Backup ({{ rclone_backup_service_name }})
ConditionPathExists={{ rclone_backup_public_key_path }}
StartLimitIntervalSec=900
StartLimitBurst=3

[Service]
EnvironmentFile=-/etc/default/rclone-backup
EnvironmentFile=-/etc/rclone/credentials
{% for command in rclone_backup_service_snapshot_commands %}
ExecStartPre={{ command }}
{% endfor %}
ExecStart=/usr/local/bin/rclone-backup backup
Restart=on-failure
RestartSec=180
